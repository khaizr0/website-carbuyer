<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Ch·ªß</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="/Public/css/home.css">
    <link rel="stylesheet" href="/Public/css/header.css">
    <link rel="stylesheet" href="/Public/css/footer.css">
    <link rel="icon" type="image/x-icon" href="/Documents/CarLogo.png">
    
    <!-- External Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" 
          integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" 
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- Configuration and Scripts -->
    <script src="/config/config.js"></script>
    <script src="/Public/JS/header.js" defer></script>
</head>
<body>
    <!-- Slideshow container -->
    <div class="slideshow-container">
        <div class="mySlides fade">
            <img src="/Public/images/SlideShow/img5.png" style="width: 100%;" alt="Slide 1">
        </div>
        <div class="mySlides fade">
            <img src="/Public/images/SlideShow/img2.png" style="width: 100%;" alt="Slide 2">
        </div>
        <div class="mySlides fade">
            <img src="/Public/images/SlideShow/img3.jpg" style="width: 100%;" alt="Slide 3">
        </div>
        <div class="mySlides fade">
            <img src="/Public/images/SlideShow/img4.webp" style="width: 100%;" alt="Slide 4">
        </div>
        <div class="mySlides fade">
            <img src="/Public/images/SlideShow/img1.jpg" style="width: 100%;" alt="Slide 5">
        </div>
        
        <!-- Navigation Buttons -->
        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
        <a class="next" onclick="plusSlides(1)">&#10095;</a>
    </div>

    <!-- Slideshow Dots -->
    <div style="text-align:center">
        <span class="dot" onclick="currentSlide(1)"></span>
        <span class="dot" onclick="currentSlide(2)"></span>
        <span class="dot" onclick="currentSlide(3)"></span>
        <span class="dot" onclick="currentSlide(4)"></span>
        <span class="dot" onclick="currentSlide(5)"></span>
    </div>

    <!-- Slideshow Script -->
    <script src="/Public/JS/slideshow.js"></script>

    <!-- Recent Product Container -->
    <div class="product-recent-container">
        <h1>Xe m·ªõi v·ªÅ</h1>
        <div class="grid" id="recent-products-grid">
            <!-- Products will be dynamically inserted here -->
        </div>
        <br>
        <a href="/xedangban" class="button">Xem th√™m s·∫£n ph·∫©m</a>
    </div>

    <!-- Why Us Container -->
    <div class="why-choose-us-container">
        <div class="image-placeholder">
            <img src="/Public/images/CarLogo.png" alt="Company Logo">
        </div>
        <div class="content">
            <h2>V√¨ sao ch·ªçn ch√∫ng t√¥i?</h2>
            <p>
                L√† ƒë∆°n v·ªã chuy√™n ho·∫°t ƒë·ªông trong lƒ©nh v·ª±c kinh doanh c√°c lo·∫°i xe, ƒë·∫∑c bi·ªát l√† xe √ît√¥ Si√™u L∆∞·ªõt.
                V·ªõi ti√™u ch√≠ t·∫≠p trung v√†o nh·ªØng xe c√≥ s·ªë ODO (Km) th·∫•p, √≠t nƒÉm s·ª≠ d·ª•ng, c√≤n b·∫£o h√†nh ch√≠nh h√£ng v√† gi√° c·∫£ t·ªëi ∆∞u nh·∫•t.
                T·∫•t c·∫£ c√°c xe b√°n ra ƒë·ªÅu ƒë∆∞·ª£c tr·∫£i qua quy tr√¨nh ki·ªÉm tra nghi√™m ng·∫∑t ƒë·ªÉ ƒë·∫£m b·∫£o ti√™u chu·∫©n ch·∫•t l∆∞·ª£ng c≈©ng nh∆∞ ƒë·ªô an to√†n cho kh√°ch h√†ng.
                Ngo√†i ra, c√¥ng ty s·∫Ω k√Ω vƒÉn b·∫£n cam k·∫øt ƒë·ªÉ b·∫£o ƒë·∫£m s·ª± minh b·∫°ch, trung th·ª±c v·ªõi kh√°ch h√†ng.
            </p>
        </div>
    </div>

    <!-- Reviews Container -->
    <div class="reviews-container">
        <div class="reviews-header">
            <h2>ƒê√°nh gi√° c·ªßa kh√°ch h√†ng</h2>
        </div>
        <div class="slider-wrapper">
            <div class="slider" id="slider">
                <div class="review">
                    <img src="/Public/images/pro5-picture.jpg" alt="Anh Nam">
                    <h3>Anh Nam</h3>
                    <p>"T∆∞ v·∫•n nhi·ªát t√¨nh, th√¢n thi·ªán"</p>
                </div>
                <div class="review">
                    <img src="/Public/images/pro5-picture.jpg" alt="Ch·ªã H·∫±ng">
                    <h3>Ch·ªã H·∫±ng</h3>
                    <p>"D·ªãch v·ª• chu ƒë√°o, chuy√™n nghi·ªáp"</p>
                </div>
                <div class="review">
                    <img src="/Public/images/pro5-picture.jpg" alt="Anh Tu·∫•n">
                    <h3>Anh Tu·∫•n</h3>
                    <p>"Gi√° c·∫£ h·ª£p l√Ω, ch·∫•t l∆∞·ª£ng t·ªët"</p>
                </div>
                <div class="review">
                    <img src="/Public/images/pro5-picture.jpg" alt="Ch·ªã Mai">
                    <h3>Ch·ªã Mai</h3>
                    <p>"S·∫Ω quay l·∫°i l·∫ßn sau"</p>
                </div>
                <div class="review">
                    <img src="/Public/images/pro5-picture.jpg" alt="Anh Minh">
                    <h3>Anh Minh</h3>
                    <p>"R·∫•t h√†i l√≤ng v·ªõi d·ªãch v·ª•"</p>
                </div>
            </div>
            <div class="buttons">
                <button class="button" id="prevBtn">&#10094;</button>
                <button class="button" id="nextBtn">&#10095;</button>
            </div>
        </div>
    </div>
    <script src="/Public/JS/reviewSlider.js"></script>

    <!-- News Container -->
    <div class="news-container">
        <div class="news-header">
            <h2>Tin t·ª©c</h2>
        </div>
        <div class="news-grid" id="news-grid">
            <!-- News items will be dynamically inserted here -->
        </div>
        <p id="no-news" style="text-align: center; color: #888;">Hi·ªán t·∫°i ch∆∞a c√≥ tin t·ª©c n√†o.</p>
    </div>

    <!-- Google Maps Container -->
    <div class="map-container">
        <iframe id="mapFrame" allowfullscreen="" loading="lazy"></iframe>
    </div>
    <script>
        document.getElementById('mapFrame').src = mapConfig.url;
    </script>

    <!-- Footer -->
    <div id="footer-container"></div>
    <script src="/Public/JS/footer.js"></script>

    <!-- Product Fetching Script -->
    <script>
        fetch('/product/recent-products')
            .then(response => {
                console.log('Response status:', response.status);
                return response.json();
            })
            .then(products => {
                console.log('Received products:', products);
                const gridContainer = document.getElementById('recent-products-grid');
                
                gridContainer.innerHTML = '';
                
                products.forEach(product => {
                    const productCard = `
                        <div class="card" onclick="window.location.href='/chitietxe?id=${product.id}'">
                            <img 
                                src="${product.imageUrl}" 
                                alt="Car" 
                                onerror="this.src='/Public/images/placeholder.png'"
                            >
                            <div class="card-content">
                                <p class="card-title">${product.name}</p>
                                <p class="card-price">${product.price}</p>
                                <p class="card-details">
                                    üìÖ ${product.year} / üöó ${product.mileage} / ‚õΩ ${product.fuelType}
                                </p>
                            </div>
                        </div>
                    `;
                    gridContainer.innerHTML += productCard;
                });
            })
            .catch(error => console.error('Error fetching products:', error));
    </script>
    <script>
        // Fetch news data dynamically
        fetch('/news/api/showNewsOnHome')
            .then(response => response.json())
            .then(newsItems => {
                const newsGrid = document.getElementById('news-grid');
                const noNewsMessage = document.getElementById('no-news');
                
                if (newsItems.length > 0) {
                    noNewsMessage.style.display = 'none';
                    newsItems.forEach(news => {
                        const newsItem = `
                            <div class="news-item">
                                 <img src="/Public/images/${news.anhDaiDien}" alt="${news.tenTT}">
                                <div class="news-content">
                                    <h3>${news.tenTT}</h3>
                                    <p>${news.chiTietBaiViet.substring(0, 100)}...</p>
                                    <div class="news-footer">
                                        <p><strong>Ng√†y ƒëƒÉng:</strong> ${news.ngayDang}</p>
                                    </div>
                                </div>
                            </div>
                        `;
                        newsGrid.innerHTML += newsItem;
                    });
                }
            })
            .catch(error => {
                console.error('Error fetching news:', error);
            });
    </script>
</body>
</html>