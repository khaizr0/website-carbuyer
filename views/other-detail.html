<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="/Public/css/home.css">
    <link rel="icon" type="image/x-icon" href="/Documents/CarLogo.png">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/Public/css/header.css">
    <link rel="stylesheet" href="/Public/css/modal.css">
    <link rel="stylesheet" href="/Public/css/other-detail.css">

    <script src="/Public/JS/header.js" defer></script>
    <link rel="stylesheet" href="/Public/css/footer.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">

    <title>Chi ti·∫øt s·∫£n ph·∫©m</title>

</head>

<body>
    <div class="layout">
        <div class="come-back">
            <i class="ri-arrow-go-back-line"></i> Quay l·∫°i
        </div>
    </div>
    <br>
    <div class="layout">
        <div class="box-product-detail">

            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="display: flex;">

                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                    <img id="product-images"
                        src="https://www.bmw-longbien.com.vn/wp-content/uploads/sites/3/2019/06/bmw-long-bien-bmw-320i-2024-anh-bia.jpg"
                        alt="·∫£nh" class="img-detail-1">
                    <div class="image-range">
                        <button class="btn-change-image">
                            <i class="ri-arrow-left-circle-fill"></i>
                        </button>
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRxTzzmx0bXJ9KzefdruWYbEaVnmeDTFhvthQ&s"
                            class="img-detail-2">
                        <img src="https://bizweb.dktcdn.net/100/066/626/files/khung-anh-den-pin-xe-dap.jpg?v=1639969199288"
                            class="img-detail-2">
                        <img src="https://product.hstatic.net/200000263155/product/e75cf02d-f214-4e8b-92be-43c6908db9c5_d36220774fe84ddeab9aeabad284ec49_master.jpg" 
                        class="img-detail-2">
                        <img src="https://bizweb.dktcdn.net/thumb/1024x1024/100/032/885/products/fenix-bc05rv2-1-a34e05d3-7154-473f-b64a-d140b5b87370.jpg?v=1649661440977"
                            class="img-detail-2">
                        <button class="btn-change-image">
                            <i class="ri-arrow-right-circle-fill"></i>
                        </button>
                    </div>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6" id="product-1"
                    style="display: flex; flex-direction: column; flex-wrap: wrap; max-width: 200px;">
                    <div class="box-price">
                        <h1 class="product-detail-name" id="product-name">BMW 320i Sport Line 2024</h1>
                        <p class="product-detail-p" id="product-price-label">Gi√° ni√™m y·∫øt:</p>
                        <h3 class="product-detail-price" id="product-price">1.600.000.000 ƒë</h3>
                    </div>
                
                    <div class="btn-regiter-callnow" id="contact-buttons">
                        <button class="register" id="register-button" onclick="openModal()">ƒêƒÉng k√Ω ph·ª• ki·ªán</button>
                        <button class="call" id="call-button" onclick="window.location.href='tel:+84123456789'">G·ªçi ngay</button>

                    </div>
                </div>


            </div>

        </div>
    </div>
    <div class="layout">
        <div class="box-tongquan-tskt">
            <ul class="box-tongquan-tskt">
                <li class="active"><a href="javascript:void(0)" onclick="showContent('TQ', 'TQ', this)">T·ªïng quan</a>
                </li>
                <li><a href="javascript:void(0)" onclick="showContent('TSKT', 'TSKT', this)">Th√¥ng s·ªë k·ªπ thu·∫≠t</a></li>
            </ul>
        </div>
    </div>
    <div class="noidung" id="TQ">
        <div class="layout">
            <div class="box-product-detail-infromation">
                <section>
                    <h1>üí•üöò ƒê·∫ßu Xe BMW 320i SPORT LINE 2024 üí• üöò</h1>
                    <ul>
                        <li>‚úÖ Odo 20.000KM</li>
                        <li>‚úÖ Ngo·∫°i th·∫•t ƒêen / N·ªôi th·∫•t ƒêen</li>
                        <li>‚úÖ B·∫£o h√†nh ch√≠nh h√£ng ƒë·∫øn 2028</li>
                        <li>‚úÖ ƒê√£ d√°n film 3M v√† trang b·ªã b·ªô l√≥t s√†n 5D</li>
                    </ul>
                </section>

                <section>
                    <h2>‚öôÔ∏è Option n·ªïi b·∫≠t</h2>
                    <ul>
                        <li>üëâ N√∫m xoay ƒëi·ªÅu khi·ªÉn iDrive Touch & h·ªá ƒëi·ªÅu h√†nh BMW 7.0</li>
                        <li>üëâ H·ªá th·ªëng √¢m thanh loa BMW Hifi 10 loa c√¥ng su·∫•t 205W</li>
                        <li>üëâ ƒêi·ªÅu h√≤a 3 v√πng ƒë·ªôc l·∫≠p c√≥ c·ª≠a gi√≥ ph√≠a sau</li>
                        <li>üëâ ƒê·ªông c∆° 4 xy-lanh th·∫≥ng h√†ng I4 tƒÉng √°p c·ªïng n·∫°p k√©p c√¥ng ngh·ªá BMW TwinPower-Turbo ƒëi
                            c√πng h·ªôp s·ªë t·ª± ƒë·ªông 8 c·∫•p</li>
                        <li>üëâ L∆∞·ªõi t·∫£n nhi·ªát thi·∫øt k·∫ø h√¨nh qu·∫£ th·∫≠n vi·ªÅn crom m·∫° b·∫°c</li>
                        <li>üëâ M√†n h√¨nh gi·∫£i tr√≠ 10.25 inch k·∫øt n·ªëi v·ªõi c·ª•m m√†n h√¨nh 12.3 inch, Apple Carplay, s·∫°c kh√¥ng
                            d√¢y</li>
                        <li>üëâ ƒê√®n LED to√†n ph·∫ßn, m·ªü r·ªông g√≥c ƒë√°nh l√°i, b·∫≠t/t·∫Øt t·ª± ƒë·ªông</li>
                        <li>üëâ B·ªô la zƒÉng 18 inch, 10 nan b·∫°c, l·ªëp 225/45R18</li>
                    </ul>
                </section>

                <section>
                    <h2>‚öôÔ∏è T√≠nh nƒÉng an to√†n th√¥ng minh</h2>
                    <ul>
                        <li>‚≠ï ABS: h·ªá th·ªëng ch·ªëng b√≥ c·ª©ng phanh</li>
                        <li>‚≠ï Th√¢n xe ƒëi·ªán t·ª≠ v·ªõi h·ªá th·ªëng ·ªïn ƒë·ªãnh DSC</li>
                        <li>‚≠ï C·∫£m bi·∫øn c·∫£nh b√°o va ch·∫°m tr·ª±c di·ªán</li>
                        <li>‚≠ï H·ªá th·ªëng c·∫£nh b√°o ch·ªách l√†n ƒë∆∞·ªùng</li>
                        <li>‚≠ï H·ªá th·ªëng c·∫£nh b√°o √°p su·∫•t l·ªëp</li>
                        <li>‚≠ï H·ªá th·ªëng Parking Assistant v·ªõi camera l√πi</li>
                    </ul>
                </section>

                <section>
                    <h2>BMW 320i SPORT LINE 2024 - PHONG C√ÅCH TH·ªÇ THAO, HI·ªÜU SU·∫§T M·∫†NH M·∫º</h2>
                    <p class="menu-content">BMW 320i Sport Line 2024 l√† m·∫´u xe sedan th·ªÉ thao h√†ng ƒë·∫ßu c·ªßa BMW, mang l·∫°i
                        tr·∫£i nghi·ªám l√°i tuy·ªát v·ªùi v√† phong c√°ch hi·ªán ƒë·∫°i. Thi·∫øt k·∫ø ngo·∫°i th·∫•t ·∫•n t∆∞·ª£ng, n·ªôi th·∫•t tinh t·∫ø
                        v√† kh·∫£ nƒÉng v·∫≠n h√†nh v∆∞·ª£t tr·ªôi ƒëem ƒë·∫øn tr·∫£i nghi·ªám l√°i ƒë·∫ßy ph·∫•n kh√≠ch v√† ƒë·∫≥ng c·∫•p.</p>
                </section>

                <section>
                    <h3 class="menu-content">1. NGO·∫†I TH·∫§T TH·ªÇ THAO CU·ªêN H√öT</h3>
                    <p class="menu-content">BMW 320i Sport Line 2024 c√≥ thi·∫øt k·∫ø ngo·∫°i th·∫•t n·ªïi b·∫≠t, mang phong c√°ch th·ªÉ
                        thao hi·ªán ƒë·∫°i. ƒê·∫∑c tr∆∞ng v·ªõi l∆∞·ªõi t·∫£n nhi·ªát h√¨nh qu·∫£ th·∫≠n, ƒë√®n LED s·∫Øc n√©t v√† ƒë∆∞·ªùng n√©t m∆∞·ª£t m√†,
                        m·∫°nh m·∫Ω. ƒêu√¥i xe v·ªõi ƒë√®n h·∫≠u LED ch·ªØ L v√† ·ªëng x·∫£ k√©p, m√¢m xe 18 inch ƒëa ch·∫•u thi·∫øt k·∫ø th·ªÉ thao.
                    </p>
                </section>

                <section>
                    <h3 class="menu-content">2. KH√îNG GIAN N·ªòI TH·∫§T</h3>
                    <p class="menu-content">N·ªôi th·∫•t sang tr·ªçng v√† tinh t·∫ø, b·ªçc da cao c·∫•p, gh·∫ø ng·ªìi th·ªÉ thao tho·∫£i m√°i,
                        m√†n h√¨nh c·∫£m ·ª©ng 10.25 inch, v√¥ lƒÉng 3 ch·∫•u t√≠ch h·ª£p n√∫t ƒëi·ªÅu khi·ªÉn. Khoang h√†nh l√Ω 480 l√≠t, h·ªá
                        th·ªëng gi·∫£i tr√≠ hi·ªán ƒë·∫°i v·ªõi √¢m thanh cao c·∫•p v√† ƒëi·ªÅu khi·ªÉn gi·ªçng n√≥i.</p>
                </section>

                <section>
                    <h3 class="menu-content">3. HI·ªÜU SU·∫§T ƒê·ªòNG C∆† V√Ä T√çNH NƒÇNG AN TO√ÄN</h3>
                    <p class="menu-content">ƒê·ªông c∆° TwinPower Turbo 2.0L, c√¥ng su·∫•t 184 m√£ l·ª±c, tƒÉng t·ªëc t·ª´ 0-100 km/h
                        trong 7.1 gi√¢y, h·ªôp s·ªë t·ª± ƒë·ªông 8 c·∫•p Steptronic Sport, h·ªá d·∫´n ƒë·ªông c·∫ßu sau. C√¥ng ngh·ªá BMW
                        EfficientDynamics t·ªëi ∆∞u hi·ªáu su·∫•t v√† gi·∫£m kh√≠ th·∫£i.</p>
                </section>

                <section>
                    <h3 class="menu-content">4. C√îNG NGH·ªÜ AN TO√ÄN HI·ªÜN ƒê·∫†I</h3>
                    <p class="menu-content">BMW 320i Sport Line 2024 trang b·ªã c√¥ng ngh·ªá an to√†n ti√™n ti·∫øn nh∆∞ h·ªó tr·ª£
                        phanh, c·∫£nh b√°o va ch·∫°m, h·ªó tr·ª£ gi·ªØ l√†n ƒë∆∞·ªùng v√† c·∫£m bi·∫øn l√πi, ƒë·∫£m b·∫£o an to√†n t·ªëi ƒëa khi di
                        chuy·ªÉn.</p>
                </section>

                <hr style="float: left; width: 500px; border: 1px solid #000;">

                <br>
                <br>
            </div>
        </div>
    </div>
    <div class="noidung" id="TSKT">
        <div class="layout">
            <div class="box-product-detail-infromation">
                <h3>TH√îNG S·ªê K·ª∏ THU·∫¨T KIA CANIVAL SIGNATURE 2.2 2023</h3>
                <table class="spec-table">
                    <thead class="table-hover">
                        <tr>
                            <th>H·∫†NG M·ª§C</th>
                            <th>TH√îNG S·ªê</th>
                        </tr>
                        <tr>
                            <td>S·ªë ch·ªó ng·ªìi</td>
                            <td>7</td>
                        </tr>
                        <tr>
                            <td>D√†i x R·ªông x Cao (mm)</td>
                            <td>5.155 x 1.995 x 1.775</td>
                        </tr>
                        <tr>
                            <td>Chi·ªÅu d√†i c∆° s·ªü (mm)</td>
                            <td>3.0.90</td>
                        </tr>
                        <tr>
                            <td>T·ª± tr·ªçng / T·∫£i tr·ªçng (Kg)</td>
                            <td>2.150 / 2.780 </td>
                        </tr>
                        <tr>
                            <td>Kho·∫£ng s√°ng g·∫ßm xe</td>
                            <td>172</td>
                        </tr>
                        <tr>
                            <td>L·ªëp, LazƒÉng</td>
                            <td>2335/55R19</td>
                        </tr>
                    </thead>

                </table>
            </div>
        </div>
    </div>

    <br>
    <div class="caikhunggiday"></div>



    <div class="layout">
        <div class="box-product-detail">
            <img src="https://www.bmw-phumyhung.vn/wp-content/uploads/sites/2/2022/09/BMW-THE-X6_POST1.jpg" alt=""
                class="box-image-detail-panel">
        </div>
    </div>

    <div class="quantam">
        <h1>B·∫°n c√≥ th·ªÉ quan t√¢m</h1>
    </div>



    <div class="bancothequantam">
        <br>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"
            style="display: flex; flex-direction: row; flex-wrap: wrap;">
            <button class="btn-change-lienquan-left">
                <i class="ri-arrow-left-circle-line"></i>
            </button>
            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                <img src="https://bmw-mienbac.vn/wp-content/uploads/2021/06/anh-xe-320i-sport-line-600x401.jpg" alt=""
                    class="image-lienquan">
                <h3 class="name-lienquan">BMW 320i Sport Line 2024</h3>
                <h4 class="price-lienquan">1.600.000.000 ƒë</h4>
                <div class="box-detail-lienquan">
                    <p class="product-detail-lienquan"><i class="ri-calendar-event-line"></i> 2024</p>
                    <p class="product-detail-lienquan"><i class="ri-road-map-line"></i>20.000 km</p>
                    <p class="product-detail-lienquan"><i class="ri-gas-station-line"></i> XƒÉng</p>
                </div>
            </div>

            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                <img src="https://bmw-mienbac.vn/wp-content/uploads/2021/06/anh-xe-320i-sport-line-600x401.jpg" alt=""
                    class="image-lienquan">
                <h3 class="name-lienquan">BMW 320i Sport Line 2024</h3>
                <h4 class="price-lienquan">1.600.000.000 ƒë</h4>
                <div class="box-detail-lienquan">
                    <p class="product-detail-lienquan"><i class="ri-calendar-event-line"></i> 2024</p>
                    <p class="product-detail-lienquan"><i class="ri-road-map-line"></i>20.000 km</p>
                    <p class="product-detail-lienquan"><i class="ri-gas-station-line"></i> XƒÉng</p>
                </div>
            </div>

            <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                <img src="https://bmw-mienbac.vn/wp-content/uploads/2021/06/anh-xe-320i-sport-line-600x401.jpg" alt=""
                    class="image-lienquan">
                <h3 class="name-lienquan">BMW 320i Sport Line 2024</h3>
                <h4 class="price-lienquan">1.600.000.000 ƒë</h4>
                <div class="box-detail-lienquan">
                    <p class="product-detail-lienquan"><i class="ri-calendar-event-line"></i> 2024</p>
                    <p class="product-detail-lienquan"><i class="ri-road-map-line"></i>20.000 km</p>
                    <p class="product-detail-lienquan"><i class="ri-gas-station-line"></i> XƒÉng</p>
                </div>
            </div>


            <button class="btn-change-lienquan-right">
                <i class="ri-arrow-right-circle-line"></i>
            </button>

        </div>

    </div>



    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>ƒêƒÉng k√Ω l√°i th·ª≠</h2><br><br>
            <form id="registerForm" method="post">
                <div class="form-row">
                    <div class="form-column">
                        <label for="name">H·ªç t√™n:</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    <div class="form-column">
                        <label for="phone">S·ªë ƒëi·ªán tho·∫°i:</label>
                        <input type="tel" id="phone" name="phone" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-column">
                        <label for="date">Ng√†y ƒë·∫∑t:</label>
                        <input type="date" id="date" name="date" required>
                    </div>
                    <div class="form-column">
                        <label for="time">Th·ªùi gian ƒë·∫∑t:</label>
                        <input type="time" id="time" name="time" required>
                    </div>
                </div>
                <br>
                <br><br>
                <button type="submit" class="submit-btn pull-right">ƒêƒÉng k√Ω</button>
                <br><br>
            </form>
        </div>
    </div>

    <script src="/Public/JS/modal.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>

    <br><br>
    <!-- Footer -->
    <div id="footer-container"></div>
    <script src="/Public/JS/footer.js"></script>

    <script>
        // L·∫•y t·∫•t c·∫£ c√°c ·∫£nh nh·ªè v√† ·∫£nh ch√≠nh
        const thumbnails = document.querySelectorAll('.img-detail-2');
        const mainImage = document.querySelector('.img-detail-1');

        // L·∫∑p qua t·ª´ng ·∫£nh nh·ªè
        thumbnails.forEach(thumbnail => {
            thumbnail.addEventListener('click', () => {
                // Khi nh·∫•n v√†o, ƒë·ªïi src c·ªßa ·∫£nh ch√≠nh th√†nh src c·ªßa ·∫£nh nh·ªè
                mainImage.src = thumbnail.src;
            });
        });

        function fetchProductDetails(productId) {
            fetch(`http://localhost:3000/product/products/${productId}`)
                .then(response => response.json())
                .then(data => {
                    // Check if the data contains error (product not found)
                    if (data.error) {
                        document.getElementById('product-details').innerHTML = '<p>Product not found.</p>';
                    } else {
                        console.log(data); // Log the product data for debugging

                        // Set the product details
                        document.getElementById('product-name').textContent = data.name || 'No Name Available';
                        document.getElementById('product-price').textContent = formatCurrency(data.price) || 'Price Not Available';



                        const imageContainer = document.getElementById('product-images');
                        imageContainer.innerHTML = '';  // Clear existing images

                        // Check if there are images in the product data
                        if (data.images && data.images.length > 0) {
                            // Select the image element with the id 'product-images'
                            const imgElement = document.getElementById('product-images');

                            // If the image element exists, set its 'src' to the first image from the array
                            if (imgElement) {
                                imgElement.src = data.images[0];  // Use the first image from the array
                                imgElement.alt = 'Product Image';
                                imgElement.style.width = '100%';  // Ensure the image fills the container width
                                imgElement.style.height = 'auto';  // Maintain the aspect ratio
                            }
                        } else {
                            imageContainer.innerHTML = '<p>No images available.</p>';  // Display message if no images
                        }



                    }
                })
                .catch(error => {
                    console.error('Error fetching product details:', error);

                });
        }


        // Utility function to format price as currency
        function formatCurrency(price) {
            if (!price) return '';
            return price.toLocaleString('vi-VN', { style: 'currency', currency: 'VND' });
        }

        window.onload = () => {
            // Get the product ID from the URL query parameter (e.g., ?id=XE001)
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id'); // Extract 'id' parameter from the URL

            // Check if productId exists in the URL
            if (productId) {
                fetchProductDetails(productId);  // Call the function to fetch product details
            } else {
                console.error("Product ID not found in the URL.");
            }
        };

        // Open the modal when the "register-button" is clicked
        function openModal() {
            document.getElementById('registerModal').style.display = 'block';
        }

        // Close the modal when the "close" button or outside the modal is clicked
        function closeModal() {
            document.getElementById('registerModal').style.display = 'none';
        }

        // Handle the form submission
        function submitForm(event) {
            event.preventDefault(); // Prevent the default form submission
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id'); 
            // Get form data
            const name = document.getElementById('name').value || null;
            const phone = document.getElementById('phone').value || null;
            const date = document.getElementById('date').value || null;
            const time = document.getElementById('time').value || null;

            // Prepare data to send to the server
            const formData = {
                idXe: productId,
                hoTenKH: name,
                soDT: phone,
                ngayTao: date,
                time: time
            };
            // Make the API call to register the test drive
            fetch('/booking/create', {
                method: 'POST', // HTTP method
                headers: {
                    'Content-Type': 'application/json' // Set the content type to JSON
                },
                body: JSON.stringify(formData) // Send the form data as a JSON string
            })
                .then(response => response.json()) // Parse the JSON response
                .then(data => {
                    if (data) {
                        // Success handling, e.g., close modal, show success message
                        alert('ƒêƒÉng k√Ω ph·ª• ki·ªán th√†nh c√¥ng!');
                        closeModal();
                    } else {
                        // Error handling, show message or alert
                        alert('C√≥ l·ªói x·∫£y ra, vui l√≤ng th·ª≠ l·∫°i!');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('C√≥ l·ªói x·∫£y ra, vui l√≤ng th·ª≠ l·∫°i!');
                });
        }


        // Close the modal if the user clicks anywhere outside of it
        window.onclick = function (event) {
            if (event.target == document.getElementById('registerModal')) {
                closeModal();
            }
        }
        document.addEventListener('DOMContentLoaded', () => {
            // Select the form by its ID
            const form = document.getElementById('registerForm');
        
            // Ensure the form exists before adding the event listener
            if (form) {
                form.addEventListener('submit', submitForm); // Attach the submit event to submitForm
            } else {
                console.error('Form not found!');
            }
        });
        
    </script>
    


    


    


</body>

</html>
